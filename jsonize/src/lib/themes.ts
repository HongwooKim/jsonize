export interface Theme {
  id: string;
  name: string;
  preview: string; // color swatch for the picker
  vars: Record<string, string>;
}

export const themes: Theme[] = [
  {
    id: "nebula",
    name: "Nebula",
    preview: "#7c3aed",
    vars: {
      "--bg-primary": "#0f0e17",
      "--bg-secondary": "#1a1a2e",
      "--bg-header": "linear-gradient(135deg, #7c3aed 0%, #2563eb 100%)",
      "--bg-toolbar": "#232340",
      "--text-primary": "#e2e8f0",
      "--text-secondary": "#94a3b8",
      "--text-header": "#f1f5f9",
      "--border-color": "#2d2d4a",
      "--border-light": "#252544",
      "--accent": "#7c3aed",
      "--accent-light": "#2d2050",
      "--accent-border": "#9333ea",
      "--editor-bg": "#0f0e17",
      "--line-number-bg": "#0c0b14",
      "--line-number-color": "#4a4a6a",
      "--tree-hover": "#1e1e38",
      "--btn-bg": "#252544",
      "--btn-hover": "#2d2d5a",
      "--btn-active": "#3a3a6a",
      "--json-key": "#c084fc",
      "--json-string": "#34d399",
      "--json-number": "#fbbf24",
      "--json-boolean": "#60a5fa",
      "--json-null": "#64748b",
      "--json-bracket": "#94a3b8",
      "--panel-bg": "rgba(26, 26, 46, 0.7)",
      "--panel-shadow": "0 4px 24px rgba(0, 0, 0, 0.3)",
      "--color-error": "#f87171",
      "--color-success": "#4ade80",
      "--error-bg": "rgba(248, 113, 113, 0.1)",
      "--success-bg": "rgba(74, 222, 128, 0.1)",
    },
  },
  {
    id: "forest",
    name: "Forest",
    preview: "#4b7a2e",
    vars: {
      "--bg-primary": "#fff",
      "--bg-secondary": "#f5f5f5",
      "--bg-header": "#4b7a2e",
      "--bg-toolbar": "#e8e8e8",
      "--text-primary": "#1a1a1a",
      "--text-secondary": "#666",
      "--text-header": "#fff",
      "--border-color": "#ccc",
      "--border-light": "#ddd",
      "--accent": "#4b7a2e",
      "--accent-light": "#b8d68f",
      "--accent-border": "#8ab455",
      "--editor-bg": "#fff",
      "--line-number-bg": "#f0f0f0",
      "--line-number-color": "#999",
      "--tree-hover": "#e8f4e8",
      "--btn-bg": "#e8e8e8",
      "--btn-hover": "#d0d0d0",
      "--btn-active": "#c0c0c0",
      "--json-key": "#8b0000",
      "--json-string": "#0b6125",
      "--json-number": "#1a1aa6",
      "--json-boolean": "#1a1aa6",
      "--json-null": "#808080",
      "--json-bracket": "#333",
      "--panel-bg": "rgba(255, 255, 255, 0.9)",
      "--panel-shadow": "0 2px 16px rgba(0, 0, 0, 0.06)",
      "--color-error": "#dc2626",
      "--color-success": "#16a34a",
      "--error-bg": "rgba(220, 38, 38, 0.06)",
      "--success-bg": "rgba(22, 163, 74, 0.06)",
    },
  },
  {
    id: "ocean",
    name: "Ocean",
    preview: "#1565c0",
    vars: {
      "--bg-primary": "#fff",
      "--bg-secondary": "#f0f4f8",
      "--bg-header": "#1565c0",
      "--bg-toolbar": "#e3edf7",
      "--text-primary": "#1a1a1a",
      "--text-secondary": "#5a6a7a",
      "--text-header": "#fff",
      "--border-color": "#b0c4de",
      "--border-light": "#d0dce8",
      "--accent": "#1565c0",
      "--accent-light": "#90caf9",
      "--accent-border": "#42a5f5",
      "--editor-bg": "#fff",
      "--line-number-bg": "#e8eff8",
      "--line-number-color": "#90a4ae",
      "--tree-hover": "#e3f2fd",
      "--btn-bg": "#e3edf7",
      "--btn-hover": "#bbdefb",
      "--btn-active": "#90caf9",
      "--json-key": "#0d47a1",
      "--json-string": "#2e7d32",
      "--json-number": "#e65100",
      "--json-boolean": "#e65100",
      "--json-null": "#78909c",
      "--json-bracket": "#263238",
      "--panel-bg": "rgba(255, 255, 255, 0.9)",
      "--panel-shadow": "0 2px 16px rgba(0, 0, 0, 0.06)",
      "--color-error": "#dc2626",
      "--color-success": "#16a34a",
      "--error-bg": "rgba(220, 38, 38, 0.06)",
      "--success-bg": "rgba(22, 163, 74, 0.06)",
    },
  },
  {
    id: "sunset",
    name: "Sunset",
    preview: "#e65100",
    vars: {
      "--bg-primary": "#fff",
      "--bg-secondary": "#fdf5f0",
      "--bg-header": "#e65100",
      "--bg-toolbar": "#fbe9e0",
      "--text-primary": "#1a1a1a",
      "--text-secondary": "#8d6e63",
      "--text-header": "#fff",
      "--border-color": "#d7a98c",
      "--border-light": "#ecddd4",
      "--accent": "#e65100",
      "--accent-light": "#ffcc80",
      "--accent-border": "#ffa726",
      "--editor-bg": "#fff",
      "--line-number-bg": "#fef0e8",
      "--line-number-color": "#bcaaa4",
      "--tree-hover": "#fff3e0",
      "--btn-bg": "#fbe9e0",
      "--btn-hover": "#ffccbc",
      "--btn-active": "#ffab91",
      "--json-key": "#bf360c",
      "--json-string": "#558b2f",
      "--json-number": "#4527a0",
      "--json-boolean": "#4527a0",
      "--json-null": "#8d6e63",
      "--json-bracket": "#3e2723",
      "--panel-bg": "rgba(255, 255, 255, 0.9)",
      "--panel-shadow": "0 2px 16px rgba(0, 0, 0, 0.06)",
      "--color-error": "#dc2626",
      "--color-success": "#16a34a",
      "--error-bg": "rgba(220, 38, 38, 0.06)",
      "--success-bg": "rgba(22, 163, 74, 0.06)",
    },
  },
  {
    id: "berry",
    name: "Berry",
    preview: "#7b1fa2",
    vars: {
      "--bg-primary": "#fff",
      "--bg-secondary": "#f8f0fc",
      "--bg-header": "#7b1fa2",
      "--bg-toolbar": "#f0e0f6",
      "--text-primary": "#1a1a1a",
      "--text-secondary": "#7e5a8e",
      "--text-header": "#fff",
      "--border-color": "#ce93d8",
      "--border-light": "#e1bee7",
      "--accent": "#7b1fa2",
      "--accent-light": "#ce93d8",
      "--accent-border": "#ab47bc",
      "--editor-bg": "#fff",
      "--line-number-bg": "#f3e5f5",
      "--line-number-color": "#ab93b5",
      "--tree-hover": "#f3e5f5",
      "--btn-bg": "#f0e0f6",
      "--btn-hover": "#e1bee7",
      "--btn-active": "#ce93d8",
      "--json-key": "#4a148c",
      "--json-string": "#1b5e20",
      "--json-number": "#c62828",
      "--json-boolean": "#c62828",
      "--json-null": "#78909c",
      "--json-bracket": "#311b40",
      "--panel-bg": "rgba(255, 255, 255, 0.9)",
      "--panel-shadow": "0 2px 16px rgba(0, 0, 0, 0.06)",
      "--color-error": "#dc2626",
      "--color-success": "#16a34a",
      "--error-bg": "rgba(220, 38, 38, 0.06)",
      "--success-bg": "rgba(22, 163, 74, 0.06)",
    },
  },
  {
    id: "midnight",
    name: "Midnight",
    preview: "#1e1e2e",
    vars: {
      "--bg-primary": "#1e1e2e",
      "--bg-secondary": "#252536",
      "--bg-header": "#11111b",
      "--bg-toolbar": "#2a2a3c",
      "--text-primary": "#cdd6f4",
      "--text-secondary": "#7f849c",
      "--text-header": "#cdd6f4",
      "--border-color": "#45475a",
      "--border-light": "#363648",
      "--accent": "#89b4fa",
      "--accent-light": "#313244",
      "--accent-border": "#585b70",
      "--editor-bg": "#1e1e2e",
      "--line-number-bg": "#181825",
      "--line-number-color": "#585b70",
      "--tree-hover": "#2a2a3c",
      "--btn-bg": "#313244",
      "--btn-hover": "#45475a",
      "--btn-active": "#585b70",
      "--json-key": "#f38ba8",
      "--json-string": "#a6e3a1",
      "--json-number": "#fab387",
      "--json-boolean": "#fab387",
      "--json-null": "#6c7086",
      "--json-bracket": "#bac2de",
      "--panel-bg": "rgba(30, 30, 46, 0.7)",
      "--panel-shadow": "0 4px 24px rgba(0, 0, 0, 0.3)",
      "--color-error": "#f87171",
      "--color-success": "#4ade80",
      "--error-bg": "rgba(248, 113, 113, 0.1)",
      "--success-bg": "rgba(74, 222, 128, 0.1)",
    },
  },
  {
    id: "rose",
    name: "Rose",
    preview: "#c62850",
    vars: {
      "--bg-primary": "#fff",
      "--bg-secondary": "#fdf2f4",
      "--bg-header": "#c62850",
      "--bg-toolbar": "#fce4ec",
      "--text-primary": "#1a1a1a",
      "--text-secondary": "#ad7080",
      "--text-header": "#fff",
      "--border-color": "#f48fb1",
      "--border-light": "#f8d0db",
      "--accent": "#c62850",
      "--accent-light": "#f48fb1",
      "--accent-border": "#e91e63",
      "--editor-bg": "#fff",
      "--line-number-bg": "#fce4ec",
      "--line-number-color": "#c9929e",
      "--tree-hover": "#fce4ec",
      "--btn-bg": "#fce4ec",
      "--btn-hover": "#f8bbd0",
      "--btn-active": "#f48fb1",
      "--json-key": "#880e4f",
      "--json-string": "#2e7d32",
      "--json-number": "#1565c0",
      "--json-boolean": "#1565c0",
      "--json-null": "#78909c",
      "--json-bracket": "#3e1a28",
      "--panel-bg": "rgba(255, 255, 255, 0.9)",
      "--panel-shadow": "0 2px 16px rgba(0, 0, 0, 0.06)",
      "--color-error": "#dc2626",
      "--color-success": "#16a34a",
      "--error-bg": "rgba(220, 38, 38, 0.06)",
      "--success-bg": "rgba(22, 163, 74, 0.06)",
    },
  },
];

export const DEFAULT_THEME_ID = "nebula";

export function applyTheme(themeId: string) {
  const theme = themes.find((t) => t.id === themeId) || themes[0];
  const root = document.documentElement;
  for (const [key, value] of Object.entries(theme.vars)) {
    root.style.setProperty(key, value);
  }
}

export function getSavedTheme(): string {
  if (typeof window === "undefined") return DEFAULT_THEME_ID;
  return localStorage.getItem("jsonize-theme") || DEFAULT_THEME_ID;
}

export function saveTheme(themeId: string) {
  localStorage.setItem("jsonize-theme", themeId);
}
